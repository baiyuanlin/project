<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/signup.css"/>
		
		<script src="js/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
	</head>
	
	<body>
		<div>
		 	<iframe src="head.html"width="100%"style="margin: 0; padding: 0;height:162px;"></iframe>
		 </div>
		 
		 <div class="mainW">
		 	<div class="main">
		 		<div class="main_left">
		 			<h2>用户注册</h2>
		 			<form action="" method="post">
		 				<!--手机号-->
		 				<p><label for="" class="form-label">
		 						<em class="warn">*</em>登录手机：
		 					</label>
		 					<input class="form_input"type="text" id="phone" placeholder="11位手机号"/>
		 					<span class="tipText">
							</span>
		 				</p>
		 				<!--密码-->
		 				<p><label for="" class="form-label">
		 					<em class="warn">*</em>密码：
		 					</label>
		 					<input class="form_input"type="password" maxlength="20" id="password"  placeholder="6-20个字符,请不要输入非法字符"/>
		 					<!--<span>密码强度 ：</span>-->
		 					<span class="tipText">
							</span>
		 				</p>
		 				<!--确认密码-->
		 				<p><label for="" class="form-label">
		 						<em class="warn">*</em>确认密码：
		 					</label>
		 					<input class="form_input"type="password" id = "passwordOk"  maxlength="20" placeholder="再次填写密码"/>
		 					<span class="tipText">
							</span>
		 				</p>
		 				<!--验证码-->
		 				<p><label for="" class="form-label">
		 					<em class="warn">*</em>验证码：
		 					</label>
		 					<input class="yzm"type="text" name="" id="codeOk" value=""  placeholder="填写验证码"/>
		 					<span id="code">
		 						
		 					</span>
		 					<span class="tipText">
		 						
							</span>	
		 				</p>
		 				
		 				<input class="xz" type="checkbox" name="license" id="" class="x-check" vtype="onerequired" data-caution="请选择同意" checked="checked">
		 				<label for="" class="form-sub-label"> 我已阅读并同意 <a href="#" class="lnklike" target="_blank">会员注册协议</a> 和 <a href="#" class="lnklike" target="_blank">隐私保护政策</a></label>
		 				
		 				<p><input type="submit" name="" value="注   册"class="signup_btn" /></p>
		 			</form>
		 			<div class="sigin_trust">
						<a href="#" ><img src="img/weixin.png"/></a>
						<a href="#" ><img src="img/weibo.png"/></a>
						<a href="#" ><img src="img/qqlogin.png"/></a>
					</div>
		 		</div>
	<script src="js/signup.js" type="text/javascript" charset="utf-8"></script>
		 		<div class="main_right">
  					<span class="descrip">已经有会员帐号请直接登录</span>
  					<a href="loginw.html" class="btn btn-import btn-huge">
  						<span>转到登录页</span>	
  					</a>

		 		</div>
		 	</div>
		 	
		 </div>
		 <div>
		 	<iframe src="footer.html"width="100%"style="margin: 0; padding: 0;height:390px;border:none;"></iframe>
		 </div>
		 
		<script src="js/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
		 	
		 <script type="text/javascript">
		 	$(function(){
		 		$("input").eq(0).blur(function(){
		 			var rePhone = /^1(3|4|5|7|8)\d{9}$/;
		 			if($(this).val().length==0){
		 				$(this).next().text("");
		 			}
		 			else if(rePhone.test($(this).val())==false){
		 				$(this).next().text("手机号格式不正确");
		 			}else{
		 				$(this).next().text("");
		 			}
		 		})
		 		//密码
		 		$("input").eq(1).blur(function(){
		 			var rePassword =/^[0-9A-Za-z]{6,20}$/;
		 			if($(this).val().length==0){
		 				$(this).next().text("");
		 			}
		 			else if(rePassword.test($(this).val())==false){
		 				$(this).next().text("长度只能在6-20个字符之间");
		 			}else{
		 				$(this).next().text("");
		 			}
		 		})
		 		//确认密码
		 		$("input").eq(2).blur(function(){
		 			if($(this).val().length==0){
		 				$(this).next().text("");
		 			}
		 			else if($(this).val()!=$("input").eq(1).val()){
		 				$(this).next().text("两次密码不一致，请重新输入");
		 			}else{
		 				$(this).next().text("");
		 			}
		 		})
		 		//验证码
		 		function code(){
					var str="qwertyuiopasdfghjklzxcvbnm1234567890QWERTYUIOPLKJHGFDSAZXCVBNM";
					var str1=0;
					for(var i=0; i<4;i++){
						str1+=str.charAt(Math.floor(Math.random()*62)) 
					}
					str1=str1.substring(1)
					$("#code").text(str1);
				}
				code();
				$("#code").click(code);	
				//验证验证码
		 		$("input").eq(3).blur(function(){
		 			if($(this).val().length==0){
		 				$(this).next().next().text("");
		 			}
		 			else if($(this).val().toUpperCase()!=$("#code").text().toUpperCase()){
		 				$(this).next().next().text("验证码不正确");
		 			}else{
		 				$(this).next().next().text("");
		 			}
		 		})
		 		//注册判断
		 		$(".signup_btn").click(function(e){
		 			for(var m = 0; m < 5; m++){
		 				if($("input").eq(m).val().length==0){
		 					
		 					if(m == 3){
		 						$('input').eq(m).next().next().text("此处不能为空");
								e.preventDefault();
								return;
		 					}
							$('input').eq(m).next().text("此处不能为空");
							e.preventDefault();
							return;
		 				}	
		 			}
		 			//注册跳转到登录页面
		 				$.post("http://h6.duchengjiu.top/shop/api_user.php",{
		 				status:"register",
		 				username:$("#phone").val(),
		 				password:$("#password").val(),	
		 			},function(data){
		 				//console.log(data)
		 				if(data.code!=0){
		 					alert(data.message)
		 				}else{
		 					alert("注册成功")
		 					location.assign("loginw.html")
		 				}
		 			})
		 			return false;
		 		})
		 		
		 	})
		 </script>
		 
		 
		
	</body>
</html>
